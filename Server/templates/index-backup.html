<!DOCTYPE html>
<html lang='en'>
<head>
    <meta charset='UTF-8'>
    <!-- 引入element-ui CSS -->
    <link rel='stylesheet' href='../static/css/element.mian.css'>
    <title></title>
</head>
<body>
<style>
    /** vue需要在引入element-ui之前引入 **/
    [v-cloak] {
        display: none;
    }
</style>
</body>
<!-- vue需要在引入element-ui之前引入 -->
<script src='../static/js/vue.js'></script>
<!-- 引入element-ui js -->
<script src='../static/js/element.mian.js'></script>
<!-- 引入canvas -->
<script src='../static/js/v-fit-columns.js'></script>

<div id='app' v-cloak>
    <div>
        <el-table v-fit-columns
                  :data='tableData' style='width: 100%;margin-bottom: 20px;' row-key='id' border default-expand-all
                  :tree-props='{children: "children", hasChildren: "hasChildren"}'>

            <el-table-column prop='id' label='ID' sortable></el-table-column>

            <el-table-column prop='class' label='班级' sortable></el-table-column>

            <el-table-column label='班级'>
                <template slot-scope='scope'>
                    <el-popover trigger='hover' placement='top'>
                        <p>纸屑: {[ scope.row.classroom.k1 ]}</p>
                        <p>黑板: {[ scope.row.classroom.k2 ]}</p>
                        <div slot='reference' class='name-wrapper'>
                            <el-tag size='medium'>{[ scope.row.classroom.scores ]}</el-tag>
                        </div>
                    </el-popover>
                </template>
            </el-table-column>

            <el-table-column label='宿舍'>
                <template slot-scope='scope'>
                    <el-popover trigger='hover' placement='top'>
                        <p>床铺: {[ scope.row.dormitory.k1 ]}</p>
                        <p>衣服: {[ scope.row.dormitory.k2 ]}</p>
                        <div slot='reference' class='name-wrapper'>
                            <el-tag size='medium'>{[ scope.row.dormitory.scores ]}</el-tag>
                        </div>
                    </el-popover>
                </template>
            </el-table-column>

            <el-table-column label='个人'>
                <template slot-scope='scope'>
                    <el-popover trigger='hover' placement='top'>
                        <p>指甲: {[ scope.row.personal.k1 ]}</p>
                        <p>头发: {[ scope.row.personal.k2 ]}</p>
                        <div slot='reference' class='name-wrapper'>
                            <el-tag size='medium'>{[ scope.row.personal.scores ]}</el-tag>
                        </div>
                    </el-popover>
                </template>
            </el-table-column>

            <el-table-column label='楼值'>
                <template slot-scope='scope'>
                    <el-popover trigger='hover' placement='top'>
                        <p>地面: {[ scope.row.floor.k1 ]}</p>
                        <p>垃圾: {[ scope.row.floor.k2 ]}</p>
                        <div slot='reference' class='name-wrapper'>
                            <el-tag size='medium'>{[ scope.row.floor.scores ]}</el-tag>
                        </div>
                    </el-popover>
                </template>
            </el-table-column>

            <el-table-column label='纪律'>
                <template slot-scope='scope'>
                    <el-popover trigger='hover' placement='top'>
                        <p>打闹: {[ scope.row.discipline.k1 ]}</p>
                        <p>手机: {[ scope.row.discipline.k2 ]}</p>
                        <div slot='reference' class='name-wrapper'>
                            <el-tag size='medium'>{[ scope.row.discipline.scores ]}</el-tag>
                        </div>
                    </el-popover>
                </template>
            </el-table-column>

            <el-table-column prop='name' label='班主任' sortable></el-table-column>

            <el-table-column label='检查时间'>
                <template slot-scope='scope'>
                    <i class='el-icon-time'></i>
                    <span style='margin-left: 10px'>{[ scope.row.date ]}</span>
                </template>
            </el-table-column>

            <!--
            <el-table-column label='操作'>
                <template slot-scope='scope'>
                    <el-button
                            size='mini'
                            @click='handleEdit(scope.$index, scope.row)'>编辑
                    </el-button>
                    <el-button
                            size='mini'
                            type='danger'
                            @click='handleDelete(scope.$index, scope.row)'>删除
                    </el-button>
                </template>
            </el-table-column>
            -->

        </el-table>
    </div>
</div>

<script>
    const Main = new Vue({
        el: '#app',
        data: {
            name: 'Hello Flask',
            tableData: [
                {% for i in data['length'] %}
                    {
                        id: '{{ data['data_info'][0]['id'] }}',
                        class: '{{ data['data_info'][0]['cls'] }}',
                        classroom: {
                            scores: '{{ data['classroom'][0]['score'] }}',
                            k1: '{{ data['classroom'][0]['reduce']['k1'] }}',
                            k2: '{{ data['classroom'][0]['reduce']['k2'] }}',
                        },
                        dormitory: {
                            scores: '{{ data['dormitory'][0]['score'] }}',
                            k1: '{{ data['dormitory'][0]['reduce']['k1'] }}',
                            k2: '{{ data['dormitory'][0]['reduce']['k2'] }}',
                       },
                        personal: {
                            scores: '{{ data['personal'][0]['score'] }}',
                            k1: '{{ data['personal'][0]['reduce']['k1'] }}',
                            k2: '{{ data['personal'][0]['reduce']['k2'] }}',
                        },
                        floor: {
                            scores: '{{ data['floor'][0]['score'] }}',
                            k1: '{{ data['floor'][0]['reduce']['k1'] }}',
                            k2: '{{ data['floor'][0]['reduce']['k2'] }}',
                       },
                        discipline: {
                            scores: '{{ data['discipline'][0]['score'] }}',
                            k1: '{{ data['discipline'][0]['reduce']['k1'] }}',
                            k2: '{{ data['discipline'][0]['reduce']['k2'] }}',
                       },
                        name: '{{ data['data_info'][0]['bzr'] }}',
                        date: '{{ data['data_info'][0]['inspect_time'] }}',
                        // children: [{}],

                    },
                {% endfor %}
            ],
            methods: {
                handleEdit(index, row) {
                    console.log(index, row);
                },
                handleDelete(index, row) {
                    console.log(index, row);
                },
                /*
                load(tree, treeNode, resolve) {
                    setTimeout(() => {
                        resolve([
                            {
                                id: 1,
                                class: '大地养护技术与应用',
                                class_room: '大地绿化20-1',
                                dormitory: '10',
                                personal: '10',
                                floor: '10',
                                discipline: '10',z
                                name: 'demo',
                                date: '2022-10-27 13:18:53',
                                address: '上海市普陀区金沙江路 1519 弄',
                            }, {
                                id: 1,
                                class: '大地养护技术与应用',
                                class_room: '大地绿化20-1',
                                dormitory: '10',
                                personal: '10',
                                floor: '10',
                                discipline: '10',
                                name: 'demo',
                                date: '2022-10-27 13:18:53',
                                address: '上海市普陀区金沙江路 1519 弄',
                            }
                        ])
                    }, 1000)
                }
                */
            },
        },
        delimiters: ['{[', ']}']
    })

    const UserData = {
        data() {
            return {
                formInline: {
                    user: '',
                    region: ''
                }
            }
        },
        methods: {
            onSubmit() {
                console.log('submit!');
            }
        }
    }
    const Ctor = Vue.extend(UserData)
    new Ctor().$mount('#user_data')
</script>


</html>