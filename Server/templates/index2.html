<!DOCTYPE html>
<html lang='en'>
<head>
    <meta charset='UTF-8'>
    <!-- 引入element-ui CSS -->
    <link rel='stylesheet' href='../static/css/element.mian.css'>
    <title></title>
</head>
<body>
<style>
    /** vue需要在引入element-ui之前引入 **/
    [v-cloak] {
        display: none;
    }
</style>
</body>
<!-- vue需要在引入element-ui之前引入 -->
<script src='../static/js/vue.js'></script>
<!-- 引入element-ui js -->
<script src='../static/js/element.mian.js'></script>
<!-- 引入canvas -->
<script src='../static/js/v-fit-columns.js'></script>

<div id='app' v-cloak>
    <div>
        <el-table v-fit-columns
                  :data='tableData' style='width: 100%;margin-bottom: 20px;' row-key='id' border default-expand-all
                  :tree-props='{children: "children", hasChildren: "hasChildren"}'>

            {% for ziDuan in inspect_res_list[0].keys() %}
                {% if ziDuan != "inspect_items" %}
                    <el-table-column prop='{{ ziDuan }}' label='{{ ziDuan }}' sortable></el-table-column>
                {% else %}
                    {% for inspect_item in inspect_res_list[0][ziDuan] %}
                        <!-- <el-table-column prop='{{ inspect_item }}' label='{{ inspect_item }}'
                                         sortable></el-table-column> -->

                        <el-table-column label='{{ inspect_item }}'>
                            <template slot-scope='scope'>
                                <el-popover trigger='hover' placement='top'>
                                    <p>床: 10</p>
                                    <p>衣服: 1</p>
                                    <p>地面: 8</p>
                                    <div slot='reference' class='name-wrapper'>
                                        <el-tag size='medium'>{[ scope.row.{{ inspect_item }} ]}</el-tag>
                                    </div>
                                </el-popover>
                            </template>
                        </el-table-column>
                    {% endfor %}
                {% endif %}
            {% endfor %}

            <!--
            <el-table-column label='操作'>
                <template slot-scope='scope'>
                    <el-button
                            size='mini'
                            @click='handleEdit(scope.$index, scope.row)'>编辑
                    </el-button>
                    <el-button
                            size='mini'
                            type='danger'
                            @click='handleDelete(scope.$index, scope.row)'>删除
                    </el-button>
                </template>
            </el-table-column>
            -->

        </el-table>
    </div>
</div>

<script>
    const Main = new Vue({
        el: '#app',
        data: {
            name: 'Hello Flask',
            // inspect_items:[{{ inspect_res_list[0]["inspect_items"].keys() }}],
            tableData:
                [
                    // 对检查列表进行遍历
                    {% for res_dict in inspect_res_list %}
                        // ssss
                        {   
                            // 对结果进行便利
                            {% for zi_duan,v in res_dict.items() %}
                                {% if zi_duan != "inspect_items" %}
                                    // 如果不是“检查项”，就正常显示
                                    {{ zi_duan }}:"{{ v }}",
                                {% else %}
                                    // 否则，就显示分数和弹窗数据
                                    {% for each_item,item_dict in res_dict["inspect_items"].items() %}
                                        {{ each_item }}:"{{ item_dict["分数"] }}",
                                    {% endfor %}
                                {% endif %}
                            {% endfor %}
                        },{
                            id: 1,
                            class:'1',
                            class_room:'10',
                            dormitory:{
                                分数: 20,
                                扣分项:{
                                    bed: '10',
                                    clothes:'10',
                                    floor:'10',
                                },
                            },
                        },
                    {% endfor %}
    ],
    methods: {
    }
    ,
    },
    delimiters: ['{[', ']}']
    })

    const UserData = {
        data() {
            return {
                formInline: {
                    user: '',
                    region: ''
                }
            }
        },
        methods: {
            onSubmit() {
                console.log('submit!');
            }
        }
    }
    const Ctor = Vue.extend(UserData)
    new Ctor().$mount('#user_data')
</script>


</html>